# 재무제표 시각화 서비스 무료 배포 가이드

이 문서는 재무제표 시각화 서비스를 무료로 배포하는 방법을 안내합니다. 여러 무료 배포 옵션 중에서 선택할 수 있습니다.

## 목차
1. [배포 전 준비사항](#배포-전-준비사항)
2. [Render 배포 방법](#render-배포-방법)
3. [Vercel 배포 방법](#vercel-배포-방법)
4. [Railway 배포 방법](#railway-배포-방법)
5. [Fly.io 배포 방법](#flyio-배포-방법)
6. [배포 후 설정](#배포-후-설정)
7. [주의사항](#주의사항)

## 배포 전 준비사항

### 1. 필수 계정 및 API 키
- GitHub 계정 (코드 저장소 관리용)
- OpenDART API 키
- Gemini API 키

### 2. 프로젝트 준비
- 모든 코드가 GitHub 저장소에 업로드되어 있어야 합니다.
- `.env` 파일은 업로드하지 않습니다. (`.gitignore`에 포함)
- `corps.json`과 `listed_corps.json` 파일이 저장소에 포함되어 있어야 합니다.

### 3. 필요한 설정 파일
프로젝트에 다음 파일들이 추가되었습니다:
- `vercel.json`: Vercel 배포용 설정 파일
- `render.yaml`: Render 배포용 설정 파일
- `netlify.toml`: Netlify 배포용 설정 파일
- `.gitignore`: Git에서 제외할 파일 목록
- `Dockerfile`: Docker 컨테이너 배포용 설정 파일

## Render 배포 방법

[Render](https://render.com/)는 웹 서비스, 데이터베이스, 정적 웹사이트 등을 무료로 호스팅할 수 있는 플랫폼입니다.

### 장점
- 무료 티어 제공 (웹 서비스 750시간/월)
- 간단한 설정
- GitHub 저장소와 연동 가능
- 자동 배포 및 SSL 인증서 제공

### 배포 단계
1. [Render 웹사이트](https://render.com/)에 가입합니다.
2. 대시보드에서 "New +"를 클릭하고 "Web Service"를 선택합니다.
3. GitHub 저장소를 연결합니다.
4. 다음 설정을 입력합니다:
   - **Name**: fs-project (원하는 이름)
   - **Environment**: Node
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
5. "Advanced" 섹션에서 환경 변수를 설정합니다:
   - `OPEN_DART_API_KEY`: OpenDART API 키
   - `GEMINI_API_KEY`: Gemini API 키
6. "Create Web Service" 버튼을 클릭하여 배포를 시작합니다.
7. 배포가 완료되면 제공된 URL로 접속하여 서비스를 확인합니다.

### 회사 코드 다운로드
배포 후에는 회사 코드 데이터를 다운로드해야 합니다. Render 대시보드에서 "Shell" 탭을 열고 다음 명령어를 실행합니다:
```bash
npm run download-corps
```

## Vercel 배포 방법

[Vercel](https://vercel.com/)은 프론트엔드 애플리케이션과 서버리스 함수를 무료로 호스팅할 수 있는 플랫폼입니다.

### 장점
- 무료 티어 제공
- 간단한 설정과 빠른 배포
- GitHub 저장소와 연동 가능
- 자동 배포 및 SSL 인증서 제공
- 글로벌 CDN 네트워크

### 배포 단계
1. [Vercel 웹사이트](https://vercel.com/)에 가입합니다.
2. 대시보드에서 "New Project"를 클릭합니다.
3. GitHub 저장소를 가져옵니다.
4. 프로젝트 설정에서 "Environment Variables" 섹션에 다음 환경 변수를 추가합니다:
   - `OPEN_DART_API_KEY`: OpenDART API 키
   - `GEMINI_API_KEY`: Gemini API 키
5. "Deploy" 버튼을 클릭하여 배포를 시작합니다.
6. 배포가 완료되면 제공된 URL로 접속하여 서비스를 확인합니다.

### 회사 코드 다운로드
Vercel은 서버리스 환경이므로, 회사 코드 데이터를 미리 다운로드하여 저장소에 포함시키는 것이 좋습니다. 로컬에서 다음 명령어를 실행한 후 결과 파일을 저장소에 커밋하세요:
```bash
npm run download-corps
git add corps.json listed_corps.json
git commit -m "Add company code data"
git push
```

## Railway 배포 방법

[Railway](https://railway.app/)는 개발자 친화적인 클라우드 플랫폼으로 무료 티어를 제공합니다.

### 장점
- 무료 티어 제공 ($5 크레딧/월)
- 간단한 설정
- GitHub 저장소와 연동 가능
- 자동 배포 및 SSL 인증서 제공

### 배포 단계
1. [Railway 웹사이트](https://railway.app/)에 가입합니다.
2. 대시보드에서 "New Project" > "Deploy from GitHub repo"를 선택합니다.
3. GitHub 저장소를 연결합니다.
4. "Variables" 탭에서 다음 환경 변수를 추가합니다:
   - `OPEN_DART_API_KEY`: OpenDART API 키
   - `GEMINI_API_KEY`: Gemini API 키
5. "Settings" 탭에서 "Start Command"를 `npm start`로 설정합니다.
6. 배포가 완료되면 "Settings" 탭에서 제공된 도메인으로 접속하여 서비스를 확인합니다.

### 회사 코드 다운로드
Railway 대시보드에서 "Connect" > "CLI"를 선택하여 명령줄 인터페이스에 접속한 후 다음 명령어를 실행합니다:
```bash
npm run download-corps
```

## Fly.io 배포 방법

[Fly.io](https://fly.io/)는 Docker 컨테이너를 전 세계 데이터 센터에 배포할 수 있는 플랫폼입니다.

### 장점
- 무료 티어 제공 (최대 3개 앱, 공유 CPU, 256MB RAM)
- 글로벌 배포
- Docker 지원
- SSL 인증서 제공

### 배포 단계
1. [Fly.io 웹사이트](https://fly.io/)에 가입합니다.
2. Fly CLI를 설치합니다:
   ```bash
   # macOS
   brew install flyctl
   # Windows
   iwr https://fly.io/install.ps1 -useb | iex
   ```
3. 로그인합니다:
   ```bash
   fly auth login
   ```
4. 프로젝트 디렉토리에서 앱을 초기화합니다:
   ```bash
   fly launch
   ```
5. 환경 변수를 설정합니다:
   ```bash
   fly secrets set OPEN_DART_API_KEY=your_opendart_api_key
   fly secrets set GEMINI_API_KEY=your_gemini_api_key
   ```
6. 앱을 배포합니다:
   ```bash
   fly deploy
   ```
7. 배포가 완료되면 제공된 URL로 접속하여 서비스를 확인합니다.

### 회사 코드 다운로드
Fly.io에서 SSH 세션을 열고 회사 코드 데이터를 다운로드합니다:
```bash
fly ssh console
cd /app
npm run download-corps
```

## 배포 후 설정

### 1. 환경 변수 확인
배포 후 환경 변수가 올바르게 설정되었는지 확인합니다. 서버 로그에서 다음과 같은 메시지가 표시되어야 합니다:
```
OpenDART API 키: [키 값의 일부]
OpenDART API 키 길이: [키 길이]
Gemini API 키: [키 값의 일부]
Gemini API 키 길이: [키 길이]
```

### 2. 회사 코드 데이터 확인
회사 코드 데이터가 올바르게 로드되었는지 확인합니다. 서버 로그에서 다음과 같은 메시지가 표시되어야 합니다:
```
전체 회사 데이터 [숫자]개 로드 완료
상장 회사 데이터 [숫자]개 로드 완료
```

### 3. 정기적인 데이터 업데이트
회사 코드 데이터는 정기적으로 업데이트해야 합니다. 배포 플랫폼에 따라 다음과 같은 방법으로 업데이트할 수 있습니다:
- **Render**: 대시보드에서 "Shell" 탭을 열고 `npm run download-corps` 실행
- **Vercel**: 로컬에서 데이터를 다운로드한 후 저장소에 커밋하여 재배포
- **Railway**: CLI를 통해 `npm run download-corps` 실행
- **Fly.io**: SSH 세션을 열고 `npm run download-corps` 실행

## 주의사항

### 1. 무료 티어 한도
무료 티어에는 다음과 같은 한도가 있을 수 있습니다:
- 월간 사용 시간 제한
- 자동 슬립 모드 (일정 시간 동안 사용하지 않으면 서버가 슬립 모드로 전환)
- 메모리 및 CPU 사용량 제한
- 대역폭 제한

### 2. API 키 보안
환경 변수로 설정한 API 키는 서버에 안전하게 저장되지만, 클라이언트 측에 노출되지 않도록 주의해야 합니다. 서버 코드에서만 API 키를 사용하세요.

### 3. API 사용량 제한
OpenDART API와 Gemini API는 사용량 제한이 있습니다. 무료 티어의 한도를 초과하지 않도록 주의하세요.

### 4. 데이터 영속성
무료 배포 옵션에서는 파일 시스템이 영속적이지 않을 수 있습니다. 중요한 데이터는 GitHub 저장소에 저장하거나 외부 스토리지 서비스를 사용하세요.

### 5. 도메인 설정
무료 배포 옵션에서는 기본적으로 서브도메인이 제공됩니다. 커스텀 도메인을 사용하려면 추가 설정이 필요할 수 있습니다.
